	/**
 * Global Script Viewer v1.0
 * https://github.com/bsweat/global-script-viewer
 * 
 * Â© 2013, Brian Sweat
 * http://bsweat.com
 * 
 * Free to use and abuse under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
 * 
 */
 
(function(){function f(e){return String(e).replace(/&/g,"&").replace(/"/g,""").replace(/'/g,"&#39;").replace(/</g,"<").replace(/>/g,">")}var e=document.getElementsByTagName("script"),t=true,n=document.createElement("div"),r=n.style,i="",s=window.location.hostname,o=window.location,u=document.createElement("style"),a=document.getElementsByTagName("head")[0];var l=function(t,r,i){return setTimeout(function(){function q(){for(var e=0;e<removedScripts.length;e++){var t=document.createElement("li"),n=document.createElement("div"),r=document.createElement("h3");t.className="script";if(removedScripts[e].node.src){var i=removedScripts[e].node.src.match(/[^/]+$/g),s=i[0].length>30?i[0].substr(0,30)+"...":i[0],o=removedScripts[e].node.src,u="Internal",a=document.createElement("p");t.className=t.className+" removed file";a.innerHTML='<span>File Path:</span> <a target="_blank" href="'+o+'">'+o+"</a>";r.innerHTML=r.innerHTML+" "+s+"<span> : Removed Script File</span>"+"<span> @ "+removedScripts[e].timing+"</span>";n.appendChild(r);n.appendChild(a)}else if(removedScripts[e].node.innerHTML){var l=f(removedScripts[e].node.innerHTML),c=document.createElement("p");t.className=t.className+" removed inline";c.innerHTML=l;r.innerHTML=r.innerHTML+"Removed Inline Script"+"<span> @ "+removedScripts[e].timing+"</span>";n.appendChild(r);n.appendChild(c)}t.appendChild(n);v.appendChild(t)}}var u=document.createDocumentFragment(),a=document.createElement("div"),c=document.createElement("ul"),h=document.createElement("h2"),p=document.createElement("ul"),d=document.createElement("h2"),v=document.createElement("ul"),m=document.createElement("h2"),g=document.createElement("div"),y=document.createElement("h2"),b=document.createElement("h3"),w=document.createElement("h3"),E=0,S=0,x=0;y.innerHTML="Number of Scripts: <span>"+e.length+".</span>";b.innerHTML=o;h.innerHTML="Head Scripts";d.innerHTML="Body Scripts";m.innerHTML="Removed Scripts";a.id="script-lists";c.id="head-list";c.appendChild(h);p.appendChild(d);v.appendChild(m);for(var T=0;T<e.length;T++){var N=document.createElement("li"),C=document.createElement("div"),k=e[T].parentNode.nodeName,L=document.createElement("h3"),A=document.createElement("span"),O=false,M="";N.className="script";if(insertedScripts.length){for(var _=0;_<insertedScripts.length;_++){if(insertedScripts[_].node.isEqualNode(e[T])){O=true}}if(O===true){M=jStatus;N.className=N.className+" inserted"}}if(e[T].src){var D=e[T].src.match(/[^/]+$/g)!==null?e[T].src.match(/[^/]+$/g):e[T].src,P=D[0].length>50?D[0].substr(0,50)+"...":D[0],H=e[T].src,B="Internal",j=document.createElement("p");if(e[T].src.lastIndexOf(s)===-1||e[T].src.lastIndexOf(s)>9){x=x+1;B="External"}N.className=N.className+" file";A.innerHTML=T+1+". ";j.innerHTML='<span>File Path:</span> <a target="_blank" href="'+H+'">'+H+"</a>";L.appendChild(A);L.innerHTML=L.innerHTML+" "+P+"<span> : "+B+"</span>"+(O===true?"<span> & Injected @ "+M+"</span>":"");C.appendChild(L);C.appendChild(j);S=S+1}else if(e[T].innerHTML){var F=f(e[T].innerHTML),I=document.createElement("p");N.className=N.className+" inline";I.innerHTML="<span>Script Snippet: </span>"+F;E=E+1;A.innerHTML=T+1+". ";L.appendChild(A);L.innerHTML=L.innerHTML+"Inline Script";C.appendChild(L);C.appendChild(I)}N.appendChild(C);if(k==="HEAD"){c.appendChild(N)}else{p.appendChild(N)}}if(removedScripts.length){q()}w.innerHTML="Script Files: <span>"+S+"</span>. Inline Scripts: <span>"+E+"</span>. Injected: <span>"+insertedScripts.length+"</span>. Removed: <span>"+removedScripts.length+"</span>. External Files: <span>"+x+"</span>.";g.id="script-info";g.appendChild(y);g.appendChild(b);g.appendChild(w);a.appendChild(c);a.appendChild(p);a.appendChild(v);u.appendChild(g);u.appendChild(a);n.innerHTML="";n.appendChild(u);if((jStatus==="DOM Ready"||jStatus==="Document Loading"||jStatus==="Window Loaded")&&(t!==e.length||r!==insertedScripts.length||i!==removedScripts.length)){var R="";R=n.innerHTML;chrome.runtime.sendMessage({attempt:"new",newScripts:R},function(e){})}var U=e.length,z=insertedScripts.length,W=removedScripts.length;l(U,z,W)},100)};updateStatus();l()})()